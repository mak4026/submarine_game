# ルール
1. 各プレイヤーはそれぞれ5x5のマス目上に戦艦、巡洋艦、潜水艦を配置する。位置は相手に伝えない。自分の艦同士を同じ場所に配置してはいけない。
2. 先行後攻を決める。
3. 手番が回ってきたプレイヤーは艦の移動か攻撃を行える。
	* 移動：自分の艦1隻を縦横のどちらかにいくらでも動かすことができる。ただし、自分の他の艦がいる場所には動かせない。相手の艦と位置が重複してしまっても構わない。移動を行った場合はどの艦をどちらに何マス動かしたかを報告する。
	* 攻撃：自分の艦がいる位置及び周囲1マスを攻撃することができる。この際どのマスを攻撃するかだけを報告すれば良い。攻撃を受けたプレイヤーはマス目を調べる。自分の艦があれば耐久力を1減らし艦種と命中したことを報告する。耐久力が0になった艦は沈没し、今後ゲームには登場しない。耐久力は戦艦3、巡洋艦2、潜水艦1である。攻撃対象が自分の艦の周囲1マスであった場合はその艦の名前を報告する。
4. 以上をいずれかのプレイヤーの艦が全て沈没するまで繰り返す。最後まで艦が残っていたプレイヤーが勝利する。

# 実装について
海戦ゲームはサーバーと2人のプレイヤーによって構成される。サーバ-プレイヤー間の情報の受け渡しはJSONで行う。
フィールド上の位置は要素2の配列で管理し、[0,0] から[4,4]までとり得る。

## プレイヤー
### 初回
艦の初期配置を以下のJSONで送る。なお、先攻後攻はサーバーで決める。

|キー|値|説明|備考|
|:--|:--|:--|:--|
|w|座標（配列）|戦艦の位置|[0,1]など|
|c|座標（配列）|巡洋艦の位置|[0,0]など|
|s|座標（配列）|駆逐艦の位置|[1,1]など|

例：
```json
{"w": [0,1], "c": [0,0], "s": [1,1]}
```

### 手番
手番のプレイヤーが行動を報告する際には、以下のJSONを送る。
それぞれの案についてattackの場合にmoveやshipを省略するかどうか要検討。

#### 案1

|キー|値|説明|備考|
|:--|:--|:--|:--|
|type|"attack", "move"|とる行動の種類|二値のどちらか|
|from|座標（配列）|行動する艦の位置|[0,0]など。attackの場合は省略する？|
|to|座標（配列）|目的の位置|[0,1]など|

例：
```json
{"type": "attack", "from": [0, 1], "to": [1, 1]} 
```
[0,1]にいる艦で[1,1]に攻撃する。

```json
{"type": "move", "from": [2, 1], "to": [2, 4]}
```
[2,1]にいる艦を[2,4]に移動する。 

#### 案2

|キー|値|説明|備考|
|:--|:--|:--|:--|
|type|"attack", "move"|とる行動の種類|二値のどちらか|
|ship|"w", "c", "s"|行動する艦の種類|"w"が戦艦、"c"が巡洋艦、"s"が潜水艦で三値のいずれか。attackの場合は省略する？|
|to|座標（配列）|目的の位置|[0,1]など|

例：
```json
{"type": "move", "ship": "w", "to": [1, 1]} 
```
戦艦を[1,1]に移動する。

## サーバー
### 行動プレイヤー宛て
プレイヤーの手番のJSONを受け取り、処理を行った後、行動したプレイヤーに以下のJSONを返す。
存在しないマスへ移動や攻撃したり、重複するマスに移動したりすると違反行為として敗北する。

|キー|値|説明|備考|
|:--|:--|:--|:--|
|result|"hit", "near", "win", "lose", "none"|行動の結果|四値のいずれか。"hit"は敵艦に攻撃が命中、"near"は敵艦の隣接マスに攻撃、"win"は勝利、"lose"は敗北、"none"は何もなし|
|ships|"w", "c", "s"の配列|艦の種類|"w"が戦艦、"c"が巡洋艦、"s"が潜水艦で三値のいずれか。winやloseやnoneの場合は省略する？|

例：
```json
{"result": "hit", "ships": ["w"]} 
```
敵の戦艦に攻撃がヒットした。
```json
{"result": "near", "ships": ["w", "c"]} 
```
攻撃した結果、敵の戦艦と巡洋艦の隣接マスだった。
```json
{"result": "win"} 
```
攻撃した結果敵艦が全て沈んで勝利した。
```json
{"result": "lose"} 
```
移動場所が不正だったので敗北した。
```json
{"result": "none"} 
```
移動しただけだったので特に何も起こらなかった。

### 相手プレイヤー宛て
手番プレイヤーの行動の結果を相手プレイヤーに通知する。相手プレイヤーが違反行為をすると勝利する。

|キー|値|説明|備考|
|:--|:--|:--|:--|
|result|"hit", "near", "move", "win", "lose"|行動の結果|四値のいずれか。"hit"は自艦に攻撃が命中、"near"は自艦の隣接マスに攻撃、"win"は勝利、"lose"は敗北、"move"は敵艦の移動|
|ships|"w", "c", "s"の配列|艦の種類|"w"が戦艦、"c"が巡洋艦、"s"が潜水艦で三値のいずれか。moveの時のみ敵艦を指す。winやloseの場合は省略する？|
|distance|座標の差分（配列）|移動した位置の差を取る|[0,-1]など。move以外では省略するか特別な値を取らせる？|
例：
```json
{"result": "hit", "ships": ["w"]} 
```
自分の戦艦に攻撃がヒットした。
```json
{"result": "near", "ships": ["w", "c"]} 
```
自分の戦艦と巡洋艦の隣接マスに攻撃された。
```json
{"result": "move", "ships": ["s"], "distance": [0, -1]}
```
相手が潜水艦を上に1マス動かした。
```json
{"result": "win"} 
```
 相手が不正行動をとったため勝利した。
```json
{"result": "lose"} 
```
自分の艦が全て沈んだので敗北した。